<!doctype html>
<html lang="en-us">
<head>

  <title>Example Okta Sign-In Widget</title>

  <!-- Core widget js and css -->

  <script src="https://ok1static.oktacdn.com/assets/js/sdk/okta-signin-widget/2.1.0/js/okta-sign-in.min.js" type="text/javascript"></script>
  <link href="https://ok1static.oktacdn.com/assets/js/sdk/okta-signin-widget/2.1.0/css/okta-sign-in.min.css" type="text/css" rel="stylesheet">
  <!-- Optional, customizable css theme options. Link your own customized copy of this file or override styles in-line -->
  <link href="https://ok1static.oktacdn.com/assets/js/sdk/okta-signin-widget/2.1.0/css/okta-theme.css" type="text/css" rel="stylesheet">

    <!-- Jquery -->
    <script src="js/jquery-3.2.1.min.js"></script>

    <!-- set http Script -->
    <script  src="js/sethttp.js"></script>
</head>
<body>
  <!-- Render the login widget here -->
  <div id="okta-login-container"></div>

  <!-- Script to init the widget -->
  <script>
	// 
	//**    carrega dados url
	//
	var url   = window.location.search.replace();
	var parameter = url.split("?")[1];
    var orgUrl = 'https://flexdev.oktapreview.com/';
    var oktaSignIn = new OktaSignIn({baseUrl: orgUrl});

    oktaSignIn.renderEl(
      { el: '#okta-login-container' },
      function (res) {
        if (res.status === 'SUCCESS') { 
//            if (parameter == "popII"){
//           	var redirectUrl = 'https://testeversao.populisservicos.com.br/populis/seguranca/login-default-form-submit.do?token=' + res.session.token;
//            }else{
//            	var redirectUrl = 'https://testeversao.populisservicos.com.br/populis/seguranca/login-default-form-submit.do?token=' + res.session.token;
//            }
			var objJson = {
				atrUser: res.user.profile.login,
				atrToken: res.session.token
				}
        	var redirectUrl = 'https://flexdev.oktapreview.com'
    			res.session.setCookieAndRedirect(redirectUrl);
//            }else{
//            	alert ("problemas para conectar o Populis, tente novamente mais tarde");
//            	window.location.reload();
//            }
        }
      }
    );  
    
   </script>
</body>
</html>